# Configuración básica
server.port=${PORT:8080}
spring.application.name=gateway

# Configuración JWT
security.jwt.secret=${JWT_SECRET:tassoiturrieta2025}

# Configuración Gateway - Rutas para TUS microservicios
spring.cloud.gateway.default-filters=RemoveRequestHeader=Cookie

# Rutas para tus microservicios ecológicos
spring.cloud.gateway.routes[0].id=api-vehiculos
spring.cloud.gateway.routes[0].uri=${VEHICULOS_URL:https://vehiculos-service.up.railway.app}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/vehiculos/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=1

spring.cloud.gateway.routes[1].id=api-conductores
spring.cloud.gateway.routes[1].uri=${CONDUCTORES_URL:https://conductores-service.up.railway.app}
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/conductores/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=1

spring.cloud.gateway.routes[2].id=api-residuos
spring.cloud.gateway.routes[2].uri=${RESIDUOS_URL:https://residuos-service.up.railway.app}
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/residuos/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=1

spring.cloud.gateway.routes[3].id=api-rutas
spring.cloud.gateway.routes[3].uri=${RUTAS_URL:https://rutas-service.up.railway.app}
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/rutas/**
spring.cloud.gateway.routes[3].filters[0]=StripPrefix=1

# Health Check
management.endpoint.health.show-details=always
management.endpoints.web.exposure.include=health,info

# ✅ EXCLUIR completamente la autoconfiguración de base de datos
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration

# CORS Configuration
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true

# Logging
logging.level.root=INFO
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.gestionresiduos_gateway.demo.security=DEBUG